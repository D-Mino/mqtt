<!-- Content Header (Page header) -->
<section class="content-header">
  <h1>
    Device
    <small>Device detail</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
    <li class="active">Device</li>
  </ol>
</section>

<section class="content">
  <div class="box box-success">
    <div class="box-header with-border">
      <h3 class="box-title">{{vm.device._id ? 'Edit Device' : 'New Device'}}</h3>
      <div class="pull-right box-tools">
        <button type="button" ng-if="vm.device._id" class="btn btn-primary btn-sm" title="Remove" ng-click="vm.remove()">
          <i class="glyphicon glyphicon-trash"></i>
        </button>
      </div>
    </div>
    <div class="box-body">
      <form name="vm.form.deviceForm" ng-submit="vm.save(vm.form.deviceForm.$valid)" novalidate>
        <fieldset>
          <div class="form-group" show-errors>
            <label class="control-label" for="name">Name</label>
            <input name="name" type="text" ng-model="vm.device.name" id="name" class="form-control" placeholder="Name" required autofocus>
            <div ng-messages="vm.form.deviceForm.name.$error" role="alert">
              <p class="help-block error-text" ng-message="required">Device name is required.</p>
            </div>
          </div>
          <div class="form-group" show-errors>
            <label class="control-label" for="code">Code</label>
            <input name="code" type="text" ng-model="vm.device.code" id="code" class="form-control"  required placeholder="Code" autofocus>
            <div ng-messages="vm.form.deviceForm.code.$error" role="alert">
              <p class="help-block error-text" ng-message="required">Code is required.</p>
            </div>
          </div>
          <div class="form-group">
            <label for="Select">Gateway</label>
            <select id="Select" class="form-control" ng-model="vm.count" ng-change="vm.onchange()">
              <option>4</option>
              <option>8</option>
            </select>
          </div>
          <div class="form-group" ng-repeat="item in vm.gateway" show-errors>
            <label class="checkbox-inline">
              <span ng-bind="item.order + 1"></span>
            </label>
            <label class="checkbox-inline">
              <input name="{{'gatewayname' + $index}}" type="text" ng-model="item.name" id="name" class="form-control" placeholder="Name" required autofocus>
            </label>
            <label class="checkbox-inline" ng-if="!vm.device._id">
              <input name="status" type="checkbox" ng-model="item.status">{{item.status ? 'On' : 'Off'}}
            </label>
            <label class="checkbox-inline" ng-messages="vm.form.deviceForm['gatewayname'+$index].$error" role="alert">
              <span class="help-block error-text" ng-message="required">Gateway name is required.</span>
            </label>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-default">{{vm.device._id ? 'Update' : 'Create'}}</button>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</section>
